{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/WEBSITE/kptexams/frontend/src/app/components/LoaderOverlay.jsx"],"sourcesContent":["\"use client\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\nexport default function LoaderOverlay({ message = \"Loading...\" }) {\r\n  return (\r\n    <motion.div\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm\"\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n    >\r\n      <motion.div\r\n        className=\"flex flex-col items-center gap-4 rounded-2xl bg-white/80 dark:bg-gray-300/80 px-8 py-6 shadow-xl border border-gray-200/40 dark:border-gray-700/40\"\r\n        initial={{ y: 20, opacity: 0 }}\r\n        animate={{ y: 0, opacity: 1 }}\r\n        transition={{ type: \"spring\", stiffness: 200, damping: 18 }}\r\n      >\r\n        {/* Animated Icon */}\r\n        <motion.div\r\n          animate={{ rotate: 360 }}\r\n          transition={{ repeat: Infinity, duration: 1, ease: \"linear\" }}\r\n        >\r\n          <Loader2 className=\"w-12 h-12 text-blue-600\" />\r\n        </motion.div>\r\n\r\n        {/* Message */}\r\n        <p className=\"text-gray-800 dark:text-gray-200 text-base font-medium tracking-wide text-center\">\r\n          {message}\r\n        </p>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS,cAAc,EAAE,UAAU,YAAY,EAAE;IAC9D,qBACE,6LAAC,uMAAM,CAAC,GAAG;QACT,WAAU;QACV,SAAS;YAAE,SAAS;QAAE;QACtB,SAAS;YAAE,SAAS;QAAE;QACtB,MAAM;YAAE,SAAS;QAAE;kBAEnB,cAAA,6LAAC,uMAAM,CAAC,GAAG;YACT,WAAU;YACV,SAAS;gBAAE,GAAG;gBAAI,SAAS;YAAE;YAC7B,SAAS;gBAAE,GAAG;gBAAG,SAAS;YAAE;YAC5B,YAAY;gBAAE,MAAM;gBAAU,WAAW;gBAAK,SAAS;YAAG;;8BAG1D,6LAAC,uMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,QAAQ;oBAAI;oBACvB,YAAY;wBAAE,QAAQ;wBAAU,UAAU;wBAAG,MAAM;oBAAS;8BAE5D,cAAA,6LAAC,+NAAO;wBAAC,WAAU;;;;;;;;;;;8BAIrB,6LAAC;oBAAE,WAAU;8BACV;;;;;;;;;;;;;;;;;AAKX;KA7BwB"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///D:/WEBSITE/kptexams/frontend/src/app/admin/addHOD/HODTable.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useAuth } from \"@clerk/nextjs\";\r\nimport { Pencil, Trash2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport LoaderOverlay from \"../../components/LoaderOverlay\";\r\n\r\nexport default function HODTable() {\r\n  const { getToken } = useAuth();\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [action, setAction] = useState(null);\r\n\r\n  // fetch HODs + Admins\r\n  const fetchUsers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = await getToken();\r\n\r\n      const res = await axios.get(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/api/users/getusers`,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      const list = res.data?.data || []; // safe fallback\r\n\r\n      setUsers(list.filter((u) => u.role === \"HOD\" || u.role === \"Admin\"));\r\n    } catch (err) {\r\n      console.error(\"Error fetching users:\", err);\r\n      toast.error(\"Failed to fetch users ‚ùå\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  // delete user\r\n  const handleDelete = async (id) => {\r\n    if (!confirm(\"Are you sure you want to delete this member?\")) return;\r\n    try {\r\n      setAction(\"deleting\");\r\n      const token = await getToken();\r\n      await axios.delete(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/api/users/deleteuser/${id}`,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setUsers(users.filter((u) => u._id !== id));\r\n      toast.success(\"‚úÖ Member deleted successfully\");\r\n    } catch (err) {\r\n      console.error(\"Error deleting user:\", err);\r\n      toast.error(\"‚ùå Failed to delete user\");\r\n    } finally {\r\n      setAction(null);\r\n    }\r\n  };\r\n\r\n  // save updated user (including image)\r\n  // save updated user (including image)\r\n  const handleSave = async (user) => {\r\n    try {\r\n      setAction(\"updating\");\r\n      const token = await getToken();\r\n\r\n      // üîπ Transform fields to uppercase except email & phone\r\n      const transformedData = {\r\n        name:\r\n          typeof user.editData.name === \"string\"\r\n            ? user.editData.name.toUpperCase()\r\n            : user.editData.name,\r\n        email: user.editData.email, // don't uppercase email\r\n        phone: user.editData.phone, // don't uppercase phone\r\n        department:\r\n          typeof user.editData.department === \"string\"\r\n            ? user.editData.department.toUpperCase()\r\n            : user.editData.department,\r\n      };\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"name\", transformedData.name);\r\n      formData.append(\"email\", transformedData.email);\r\n      formData.append(\"phone\", transformedData.phone);\r\n      formData.append(\"department\", transformedData.department);\r\n\r\n      if (user.editData.imageFile) {\r\n        formData.append(\"image\", user.editData.imageFile); // üëà file for Cloudinary\r\n      }\r\n\r\n      const res = await axios.put(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/api/users/updateuser/${user._id}`,\r\n        formData,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        }\r\n      );\r\n\r\n      // update state with new user\r\n      setUsers(\r\n        users.map((u) =>\r\n          u._id === user._id ? { ...res.data.data, isEditing: false } : u\r\n        )\r\n      );\r\n      toast.success(\"‚úÖ User updated successfully\");\r\n    } catch (err) {\r\n      console.error(\"Error updating user:\", err);\r\n      toast.error(\"‚ùå Failed to update user\");\r\n    } finally {\r\n      setAction(null);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading members...</p>;\r\n\r\n  return (\r\n    <div className=\"mt-10 relative\">\r\n      {/* Loader Overlay */}\r\n      {action && (\r\n        <LoaderOverlay\r\n          message={action === \"deleting\" ? \"Deleting...\" : \"Updating...\"}\r\n        />\r\n      )}\r\n\r\n      <h2 className=\"text-xl font-semibold mb-4\">List of HODs & Admins</h2>\r\n\r\n      {/* Responsive wrapper */}\r\n      <div className=\"overflow-x-auto rounded-lg border\">\r\n        <table className=\"w-full border-collapse text-sm\">\r\n          <thead className=\"bg-gray-100 text-left\">\r\n            <tr>\r\n              <th className=\"p-2\">Sl. No.</th>\r\n              <th className=\"p-2\">Image</th>\r\n              <th className=\"p-2\">Name</th>\r\n              <th className=\"p-2\">Email</th>\r\n              <th className=\"p-2\">Phone</th>\r\n              <th className=\"p-2\">Department</th>\r\n              <th className=\"p-2\">Role</th>\r\n              <th className=\"p-2\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {users.map((user, index) => (\r\n              <tr key={user._id} className=\"border-t\">\r\n                {/* Sl. No. */}\r\n                <td className=\"p-2 text-gray-600\">{index + 1}</td>\r\n                {/* Image */}\r\n                <td className=\"p-2\">\r\n                  {user.isEditing ? (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        onChange={(e) =>\r\n                          setUsers(\r\n                            users.map((u) =>\r\n                              u._id === user._id\r\n                                ? {\r\n                                    ...u,\r\n                                    editData: {\r\n                                      ...u.editData,\r\n                                      imageFile: e.target.files[0],\r\n                                      preview: URL.createObjectURL(\r\n                                        e.target.files[0]\r\n                                      ),\r\n                                    },\r\n                                  }\r\n                                : u\r\n                            )\r\n                          )\r\n                        }\r\n                      />\r\n                      {user.editData.preview && (\r\n                        <img\r\n                          src={user.editData.preview}\r\n                          alt=\"preview\"\r\n                          className=\"w-10 h-10 rounded-full object-cover\"\r\n                        />\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <img\r\n                      src={user.imageUrl || \"/default-avatar.png\"}\r\n                      alt={user.name}\r\n                      className=\"w-10 h-10 rounded-full object-cover\"\r\n                    />\r\n                  )}\r\n                </td>\r\n\r\n                {/* Name */}\r\n                <td className=\"p-2\">\r\n                  {user.isEditing ? (\r\n                    <input\r\n                      type=\"text\"\r\n                      value={user.editData.name}\r\n                      onChange={(e) =>\r\n                        setUsers(\r\n                          users.map((u) =>\r\n                            u._id === user._id\r\n                              ? {\r\n                                  ...u,\r\n                                  editData: {\r\n                                    ...u.editData,\r\n                                    name: e.target.value,\r\n                                  },\r\n                                }\r\n                              : u\r\n                          )\r\n                        )\r\n                      }\r\n                      className=\"border px-2 py-1 rounded w-full\"\r\n                    />\r\n                  ) : (\r\n                    user.name\r\n                  )}\r\n                </td>\r\n\r\n                {/* Email */}\r\n                <td className=\"p-2\">\r\n                  {user.isEditing ? (\r\n                    <input\r\n                      type=\"email\"\r\n                      value={user.editData.email}\r\n                      onChange={(e) =>\r\n                        setUsers(\r\n                          users.map((u) =>\r\n                            u._id === user._id\r\n                              ? {\r\n                                  ...u,\r\n                                  editData: {\r\n                                    ...u.editData,\r\n                                    email: e.target.value,\r\n                                  },\r\n                                }\r\n                              : u\r\n                          )\r\n                        )\r\n                      }\r\n                      className=\"border px-2 py-1 rounded w-full\"\r\n                    />\r\n                  ) : (\r\n                    user.email\r\n                  )}\r\n                </td>\r\n\r\n                {/* Phone */}\r\n                <td className=\"p-2\">\r\n                  {user.isEditing ? (\r\n                    <input\r\n                      type=\"tel\"\r\n                      value={user.editData.phone}\r\n                      onChange={(e) =>\r\n                        setUsers(\r\n                          users.map((u) =>\r\n                            u._id === user._id\r\n                              ? {\r\n                                  ...u,\r\n                                  editData: {\r\n                                    ...u.editData,\r\n                                    phone: e.target.value,\r\n                                  },\r\n                                }\r\n                              : u\r\n                          )\r\n                        )\r\n                      }\r\n                      className=\"border px-2 py-1 rounded w-full\"\r\n                    />\r\n                  ) : (\r\n                    user.phone\r\n                  )}\r\n                </td>\r\n\r\n                {/* Department */}\r\n                <td className=\"p-2 uppercase\">\r\n                  {user.isEditing ? (\r\n                    <select\r\n                      value={user.editData.department}\r\n                      onChange={(e) =>\r\n                        setUsers(\r\n                          users.map((u) =>\r\n                            u._id === user._id\r\n                              ? {\r\n                                  ...u,\r\n                                  editData: {\r\n                                    ...u.editData,\r\n                                    department: e.target.value,\r\n                                  },\r\n                                }\r\n                              : u\r\n                          )\r\n                        )\r\n                      }\r\n                      className=\"border px-2 py-1 rounded w-full\"\r\n                    >\r\n                      <option value=\"at\">Automobile Engineering</option>\r\n                      <option value=\"ch\">Chemical Engineering</option>\r\n                      <option value=\"ce\">Civil Engineering</option>\r\n                      <option value=\"cs\">Computer Science Engineering</option>\r\n                      <option value=\"ec\">\r\n                        Electronics & Communication Engineering\r\n                      </option>\r\n                      <option value=\"eee\">\r\n                        Electrical & Electronics Engineering\r\n                      </option>\r\n                      <option value=\"me\">Mechanical Engineering</option>\r\n                      <option value=\"po\">Polymer Engineering</option>\r\n                      <option value=\"sc\">Science and English</option>\r\n                    </select>\r\n                  ) : (\r\n                    user.department\r\n                  )}\r\n                </td>\r\n\r\n                {/* Role */}\r\n                <td className=\"p-2 capitalize\">{user.role}</td>\r\n\r\n                {/* Actions */}\r\n                <td className=\"p-2 flex gap-2\">\r\n                  {user.isEditing ? (\r\n                    <>\r\n                      <button\r\n                        className=\"px-2 py-1 bg-green-500 text-white rounded\"\r\n                        onClick={() => handleSave(user)}\r\n                      >\r\n                        Save\r\n                      </button>\r\n                      <button\r\n                        className=\"px-2 py-1 bg-gray-400 text-white rounded\"\r\n                        onClick={() =>\r\n                          setUsers(\r\n                            users.map((u) =>\r\n                              u._id === user._id\r\n                                ? { ...u, isEditing: false }\r\n                                : u\r\n                            )\r\n                          )\r\n                        }\r\n                      >\r\n                        Cancel\r\n                      </button>\r\n                    </>\r\n                  ) : (\r\n                    <button\r\n                      className=\"p-1 text-blue-600 hover:bg-blue-50 rounded\"\r\n                      onClick={() =>\r\n                        setUsers(\r\n                          users.map((u) =>\r\n                            u._id === user._id\r\n                              ? { ...u, isEditing: true, editData: { ...u } }\r\n                              : u\r\n                          )\r\n                        )\r\n                      }\r\n                    >\r\n                      <Pencil className=\"w-4 h-4\" />\r\n                    </button>\r\n                  )}\r\n\r\n                  <button\r\n                    className=\"p-1 text-red-600 hover:bg-red-50 rounded\"\r\n                    onClick={() => handleDelete(user._id)}\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n\r\n            {users.length === 0 && (\r\n              <tr>\r\n                <td colSpan={7} className=\"p-4 text-center text-gray-500\">\r\n                  No HODs or Admins found\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 683, "column": 0}, "map": {"version":3,"sources":["file:///D:/WEBSITE/kptexams/frontend/src/app/admin/addHOD/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Upload, Image as ImageIcon } from \"lucide-react\";\r\nimport { useAuth } from \"@clerk/nextjs\";\r\nimport { toast } from \"sonner\";\r\nimport HODTable from \"./HODTable\";\r\nimport LoaderOverlay from \"../../components/LoaderOverlay\";\r\n\r\nconst departments = [\r\n  { value: \"\", label: \"All Departments\" },\r\n  { value: \"AT\", label: \"Automobile Engineering\" },\r\n  { value: \"CH\", label: \"Chemical Engineering\" },\r\n  { value: \"CE\", label: \"Civil Engineering\" },\r\n  { value: \"CS\", label: \"Computer Science Engineering\" },\r\n  { value: \"EC\", label: \"Electronics & Communication Engineering\" },\r\n  { value: \"EEE\", label: \"Electrical & Electronics Engineering\" },\r\n  { value: \"ME\", label: \"Mechanical Engineering\" },\r\n  { value: \"PO\", label: \"Polymer Engineering\" },\r\n  { value: \"SC\", label: \"Science and English\" },\r\n];\r\n\r\nconst roles = [\r\n  \"HOD\",\r\n  \"Admin\",\r\n  \"Principal\",\r\n  \"Registrar\",\r\n  \"COE\",\r\n  \"AssistantCOE\",\r\n  \"ChairmanOfExams\",\r\n  \"Staff\",\r\n  \"Student\",\r\n];\r\n\r\nexport default function AddHODForm() {\r\n  const { getToken } = useAuth();\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    department: \"\",\r\n    role: \"HOD\",\r\n    image: null,\r\n  });\r\n\r\n  const [status, setStatus] = useState(null);\r\n  const [refreshKey, setRefreshKey] = useState(0);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (name === \"image\" && files) {\r\n      setForm({ ...form, image: files[0] });\r\n    } else {\r\n      setForm({ ...form, [name]: value });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setStatus(\"saving\");\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      Object.entries(form).forEach(([key, value]) => {\r\n        if (value) formData.append(key, value);\r\n      });\r\n\r\n      const token = await getToken();\r\n\r\n      await axios.post(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/api/users/adduser`,\r\n        formData,\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      toast.success(`${form.role} added successfully!`);\r\n\r\n      setForm({\r\n        name: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n        department: \"\",\r\n        role: \"HOD\",\r\n        image: null,\r\n      });\r\n\r\n      setRefreshKey((prev) => prev + 1);\r\n    } catch (error) {\r\n      const message =\r\n        error?.response?.data?.message ||\r\n        error?.message ||\r\n        \"Failed to add member.\";\r\n      toast.error(message);\r\n    } finally {\r\n      setStatus(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"relative\">\r\n      {status === \"saving\" && (\r\n        <LoaderOverlay message={`Adding ${form.role}...`} />\r\n      )}\r\n\r\n      {/* Header */}\r\n      <h2 className=\"text-3xl font-bold text-gray-900 mb-6\">\r\n        Add Head of Department\r\n      </h2>\r\n\r\n      {/* Form Card */}\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"bg-white shadow-xl rounded-2xl p-8 space-y-6 border border-gray-100\"\r\n      >\r\n        {/* Name */}\r\n        <div>\r\n          <label className=\"text-sm font-semibold text-gray-700\">\r\n            Full Name\r\n          </label>\r\n          <input\r\n            name=\"name\"\r\n            value={form.name}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"mt-2 w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none\"\r\n            placeholder=\"Enter full name\"\r\n          />\r\n        </div>\r\n\r\n        {/* Email */}\r\n        <div>\r\n          <label className=\"text-sm font-semibold text-gray-700\">Email</label>\r\n          <input\r\n            name=\"email\"\r\n            value={form.email}\r\n            type=\"email\"\r\n            onChange={handleChange}\r\n            required\r\n            className=\"mt-2 w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none\"\r\n            placeholder=\"Enter email\"\r\n          />\r\n        </div>\r\n\r\n        {/* Phone */}\r\n        <div>\r\n          <label className=\"text-sm font-semibold text-gray-700\">Phone</label>\r\n          <input\r\n            name=\"phone\"\r\n            value={form.phone}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"mt-2 w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none\"\r\n            placeholder=\"Enter phone number\"\r\n          />\r\n        </div>\r\n\r\n        {/* Department */}\r\n        <div>\r\n          <label className=\"text-sm font-semibold text-gray-700\">\r\n            Department\r\n          </label>\r\n          <select\r\n            name=\"department\"\r\n            value={form.department}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"mt-2 w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none\"\r\n          >\r\n            <option value=\"\">Select Department</option>\r\n            {departments.map((dept) => (\r\n              <option key={dept.value} value={dept.value}>\r\n                {dept.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Role */}\r\n        <div>\r\n          <label className=\"text-sm font-semibold text-gray-700\">Role</label>\r\n          <select\r\n            name=\"role\"\r\n            value={form.role}\r\n            onChange={handleChange}\r\n            className=\"mt-2 w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none\"\r\n          >\r\n            {roles.map((r) => (\r\n              <option key={r} value={r}>\r\n                {r}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Image Upload */}\r\n        <div>\r\n          <label className=\"text-sm font-semibold text-gray-700\">\r\n            Profile Image\r\n          </label>\r\n\r\n          <div className=\"flex items-center gap-5 mt-2\">\r\n            {form.image ? (\r\n              <img\r\n                src={URL.createObjectURL(form.image)}\r\n                className=\"w-20 h-20 rounded-full border object-cover shadow-md\"\r\n              />\r\n            ) : (\r\n              <div className=\"w-20 h-20 flex items-center justify-center rounded-full bg-gray-100 border shadow-inner\">\r\n                <ImageIcon className=\"w-7 h-7 text-gray-400\" />\r\n              </div>\r\n            )}\r\n\r\n            <label className=\"cursor-pointer bg-blue-600 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 hover:bg-blue-700 shadow\">\r\n              <Upload className=\"w-5 h-5\" />\r\n              Upload Image\r\n              <input\r\n                type=\"file\"\r\n                name=\"image\"\r\n                accept=\"image/*\"\r\n                className=\"hidden\"\r\n                onChange={handleChange}\r\n              />\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Button */}\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition-all\"\r\n        >\r\n          Add Member\r\n        </button>\r\n      </form>\r\n\r\n      {/* Refresh Table */}\r\n      <HODTable key={refreshKey} />\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}